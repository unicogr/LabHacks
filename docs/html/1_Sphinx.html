
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>1. Documenting research with Sphinxl &#8212; researchLog  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Cortical surface reconstruction of fMRI data" href="2_fMRI.html" />
    <link rel="prev" title="UNICOG tutorials:" href="index.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/nico-logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Research Log</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. <span style="color:black">Documenting research with <em>Sphinx</em>l</span></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#comments">1.1. <span style="color:lightblue">Comments üî®</span></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2_fMRI.html">2. <span style="color:black"> Cortical surface reconstruction of fMRI data </span></a></li>
<li class="toctree-l1"><a class="reference internal" href="References.html">3. <span style="color:black">References</span></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Codebook:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">myCodeIsYourCode</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter"><strong>UNICOG tutorials:</strong></a></li>
      <li>Next: <a href="2_fMRI.html" title="next chapter"><span class="section-number">2. </span><span style="color:black"> Cortical surface reconstruction of fMRI data </span></a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document"><strong>UNICOG tutorials:</strong></a>
        </li>
        <li>
          <a href="2_fMRI.html" title="Next document"><span class="section-number">2. </span><span style="color:black"> Cortical surface reconstruction of fMRI data </span></a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="documenting-research-with-sphinxl">
<h1><span class="section-number">1. </span><span style="color:black">Documenting research with <em>Sphinx</em>l</span><a class="headerlink" href="#documenting-research-with-sphinxl" title="Permalink to this heading">¬∂</a></h1>
<p>Same as in <a class="reference external" href="https://github.com/nicogravel/researchLog_template">README</a>:</p>
<p>This tutorial is a collaborative effort with <a class="reference external" href="https://github.com/chrplr">Christophe Pallier</a>. Please see <a class="reference external" href="https://github.com/chrplr/mynotebook">here</a> for a boiled down (or ‚Äú<em>distilled</em>‚Äù) version of it. The requirements are specificed in the file <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> within the <a class="reference external" href="https://github.com/nicogravel/researchLog_template">main repo‚Äôs branch</a>. The steps outlined here should be tailored to meet each individual‚Äôs specific needs.</p>
<details>
  <summary><span style="color:#3382FF"> 1.- Set up research project codebook folder using Python, Sphinx and Github</span></summary>  
<p>First, we want to create a project folder that will contain the research code (Matlab, Python, Jupyter notebooks, etc), the data, the results and the documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>‚îú‚îÄ‚îÄ docs
  ‚îî‚îÄ‚îÄ.nojekyll
  ‚îî‚îÄ‚îÄindex.html
‚îú‚îÄ‚îÄ docs_local
  ‚îî‚îÄ‚îÄ source
  ‚îî‚îÄ‚îÄ _static
  ‚îî‚îÄ‚îÄ _templates
  ‚îî‚îÄ‚îÄ figures
  ‚îî‚îÄ‚îÄ myContent.md
  ‚îî‚îÄ‚îÄ index.rst
  ‚îî‚îÄ‚îÄ references.bib
‚îú‚îÄ‚îÄ results
‚îî‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
</pre></div>
</div>
<p>Inside docs/index.html we add:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;0; url=./html/index.html&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<p>The folder <code class="docutils literal notranslate"><span class="pre">docs/html</span></code> will be copied from <code class="docutils literal notranslate"><span class="pre">docs_local/build/html</span></code> once we build the docs, as explained below. Meanwhile, the folder <code class="docutils literal notranslate"><span class="pre">docs_local</span></code> is added to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>.</p>
</details>
<br>
<details>
  <summary><span style="color:#3382FF"> 2.- Set up pyenv environment (first install pyenv)</span></summary>  
<p>We can then create a python environment locally and install Sphinx:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pyenv<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.8.19
pyenv<span class="w"> </span>virtualenv<span class="w"> </span><span class="m">3</span>.8.19<span class="w"> </span>Sphinx
pyenv<span class="w"> </span>activate<span class="w"> </span>Sphinx
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</details>
<br>
<details>
  <summary><span style="color:#3382FF"> 3.- Initialize or fork Github project</span></summary>  
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;# ResearchLog&quot;</span> <span class="o">&gt;&gt;</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;1st commit&quot;</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">M</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/.../</span><span class="n">researchLog</span><span class="o">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
</details>
<br>
<details>
  <summary><span style="color:#3382FF"> 4.- Create a Python package</span></summary>  
<p>Create a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file in the root of your project:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>ResearchLog
touch<span class="w"> </span>pyproject.toml
</pre></div>
</div>
<p>and add the following to <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;setuptools.build_meta&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myCodeIsYourCode&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.0.0&quot;</span><span class="w">  </span><span class="c1"># You can specify the version here</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A short description of your project&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.8&quot;</span>


<span class="k">[tool.setuptools.packages.find]</span>
<span class="n">where</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Create myCodeIsYourCode directory an add empty <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file to it, together with a python file that prints ‚Äúhello world‚Äù to your package:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>myCodeIsYourCode
<span class="nb">cd</span><span class="w"> </span>myCodeIsYourCode
touch<span class="w"> </span>__init__.py
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;print(&#39;hello world&#39;)&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>helloworld.py
</pre></div>
</div>
<p>Go to the root directory and install your package from the root directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>..
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
sphinx-apidoc<span class="w"> </span>-f<span class="w"> </span>-o<span class="w"> </span>docs_local/source<span class="w"> </span>myCodeIsYourCode
</pre></div>
</div>
<p>Try it:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python
</pre></div>
</div>
<p>Then in python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">myCodeIsYourCode.helloworld</span>
<span class="go">hello world</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
</details>
<br>
<details>
  <summary><span style="color:#3382FF"> 5.- Generate project and code documentation using Sphinx</span></summary>  
<p>The folder <code class="docutils literal notranslate"><span class="pre">docs_local</span></code> will be used to generate the <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">sphinx</a> documentation. Then, we will copy the <code class="docutils literal notranslate"><span class="pre">build/html</span></code> to <code class="docutils literal notranslate"><span class="pre">docs</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/.../ResearchLog/docs_local/
make<span class="w"> </span>clean<span class="p">;</span><span class="w"> </span>make<span class="w"> </span>html
rsync<span class="w"> </span>-a<span class="w"> </span>--delete<span class="w"> </span>/home/.../ResearchLog/docs_local/build/html<span class="w"> </span>/home/.../ResearchLog/docs/
</pre></div>
</div>
<p>Edit <code class="docutils literal notranslate"><span class="pre">myCodeIsYourCode.rst</span></code>: add <em>:noindex:</em> to the end of the file, as follows:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="gh">Module contents</span>
<span class="gh">---------------</span>

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> myCodeIsYourCode
   <span class="nc">:members:</span>
   <span class="nc">:undoc-members:</span>
   <span class="nc">:show-inheritance:</span>
   <span class="nc">:noindex:</span>
</pre></div>
</div>
<p>Now enjoy building up your python package!</p>
</details>
<br>
<details>
  <summary><span style="color:#3382FF"> 5.- Work: edit, make and commit</span></summary>  
<p>After these steps one wants to <em>make</em> the documentation locally. To build the documentation automatically, edit then the document <code class="docutils literal notranslate"><span class="pre">modules.rst</span></code> ‚Äìif necessary, and do <em>make clean</em> followed by <em>make html</em>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>docs_local
make<span class="w"> </span>clean
make<span class="w"> </span>html
</pre></div>
</div>
<p>After adding new code and document everything, working on docstrings, etc, do not forget to commit the changes to Github and update both the documentation and the package. For example, if you write new python functions, do:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span> pip install -e .
 sphinx-apidoc -f -o docs_local/source myCodeIsYourCode
 git add .
 git commit -m &quot;replace setup.py for pyproject.toml, updates in docstrings, etc&quot;
 git push -u origin main&#39;
</pre></div>
</div>
</details>
<br>
<section id="comments">
<h2><span class="section-number">1.1. </span><span style="color:lightblue">Comments üî®</span><a class="headerlink" href="#comments" title="Permalink to this heading">¬∂</a></h2>
<script src="https://giscus.app/client.js"
        data-repo="nicogravel/researchLog_template"
        data-repo-id="R_kgDON90EnA"
        data-category="Giscus!"
        data-category-id="DIC_kwDON90EnM4CnVS9"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="gruvbox"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document"><strong>UNICOG tutorials:</strong></a>
        </li>
        <li>
          <a href="2_fMRI.html" title="Next document"><span class="section-number">2. </span><span style="color:black"> Cortical surface reconstruction of fMRI data </span></a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;.
      
      |
      <a href="_sources/1_Sphinx.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>